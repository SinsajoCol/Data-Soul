<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>PatrÃ³n Observer - Encuesta dinÃ¡mica</title>
  <style>
    body { font-family: Arial; margin: 20px; }
    .encuesta, .resultados {
      border: 2px solid #ccc;
      border-radius: 10px;
      padding: 16px;
      margin-bottom: 20px;
      background: #f9f9f9;
    }
    button {
      margin: 5px;
      padding: 8px 12px;
      cursor: pointer;
    }
    h3 { margin-bottom: 10px; }
  </style>
</head>
<body>
  <div class="encuesta">
    <h3>Â¿Te gusta la inteligencia artificial?</h3>
    <button onclick="encuesta.registrarRespuesta('SÃ­')">SÃ­</button>
    <button onclick="encuesta.registrarRespuesta('No')">No</button>
  </div>

  <div class="resultados">
    <h3>Resultados en tiempo real</h3>
    <p id="resultadoSi">ğŸ‘ SÃ­: 0</p>
    <p id="resultadoNo">ğŸ‘ No: 0</p>
  </div>

  <script>
    // ğŸ”¹ Clase Subject (Publicador)
    class Encuesta {
      constructor() {
        this.respuestas = { Si: 0, No: 0 };
        this.observadores = [];
      }

      // Suscribir observadores
      suscribir(funcion) {
        this.observadores.push(funcion);
      }

      // Notificar a todos los observadores
      notificar() {
        this.observadores.forEach(func => func(this.respuestas));
      }

      // Registrar respuesta del usuario
      registrarRespuesta(opcion) {
        if (opcion === 'SÃ­') this.respuestas.Si++;
        if (opcion === 'No') this.respuestas.No++;
        this.notificar(); // <-- AquÃ­ ocurre la "magia"
      }
    }

    // ğŸ”¹ Crear instancia del sujeto
    const encuesta = new Encuesta();

    // ğŸ”¹ Crear observadores (funciones que se ejecutan al cambiar datos)
    const actualizarVistaResultados = (datos) => {
      document.getElementById('resultadoSi').textContent = `ğŸ‘ SÃ­: ${datos.Si}`;
      document.getElementById('resultadoNo').textContent = `ğŸ‘ No: ${datos.No}`;
    };

    const registrarEnConsola = (datos) => {
      console.log("Resultados actualizados:", datos);
    };

    // ğŸ”¹ Suscribir observadores al publicador
    encuesta.suscribir(actualizarVistaResultados);
    encuesta.suscribir(registrarEnConsola);
  </script>
</body>
</html>